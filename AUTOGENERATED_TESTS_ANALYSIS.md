# –ê–Ω–∞–ª–∏–∑ –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

## –ó–∞–¥–∞—á–∞
–†–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –±–ª–æ–∫–∏—Ä—É—é—Ç CI, –∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏—Ö –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å.

## –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

### 1. core:network/UploadWorkerTest.kt (1105 —Å—Ç—Ä–æ–∫)

**–°—Ç–∞—Ç—É—Å:** ‚ùå –£–ñ–ï –û–¢–ö–õ–Æ–ß–ï–ù (—á–µ—Ä–µ–∑ `tasks.withType<Test>().configureEach { enabled = false }`)

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚úÖ **–ó–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ WorkManager** - –æ—Å–Ω–æ–≤–Ω–æ–π flow –∑–∞–≥—Ä—É–∑–∫–∏ —Å multipart encoding
- ‚úÖ **Streaming upload** - —á–∞–Ω–∫–æ–≤–∞–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –ø–∞–º—è—Ç–∏
- ‚úÖ **Progress reporting** - –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏ (–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è)
- ‚úÖ **Retry –ª–æ–≥–∏–∫–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–∫–∞—Ö
- ‚úÖ **Conflict resolution (409)** - reconciliation —á–µ—Ä–µ–∑ GET /v1/uploads/by-key/{key}
- ‚úÖ **–ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ –æ—á–µ—Ä–µ–¥—å PollWorker** - –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ **Expedited work policy** - –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ setExpedited()
- ‚úÖ **Idempotency keys** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–µ–π –ø—Ä–∏ —Ä–µ—Ç—Ä–∞—è—Ö
- ‚úÖ **Foreground notifications** - –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö
- ‚úÖ **Error handling** - –≤—Å–µ HTTP –∫–æ–¥—ã (413, 401, 404, 500, 503 –∏ –¥—Ä.)
- ‚úÖ **HMAC signing** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ **SHA256 digests** - –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è —Å—É–º–º–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- ‚úÖ **EXIF metadata** - –ø–µ—Ä–µ–¥–∞—á–∞ GPS –∏ EXIF –¥–∞–Ω–Ω—ã—Ö

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üî¥ **–í–´–°–û–ö–ê–Ø**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç CORE –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤)
- –°–ª–æ–∂–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: WorkManager + Retrofit + OkHttp + Room + ContentResolver
- –ü–æ–∫—Ä—ã–≤–∞–µ—Ç edge cases, –∫–æ—Ç–æ—Ä—ã–µ —Å–ª–æ–∂–Ω–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é (conflict resolution, streaming, progress monitoring)
- –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç –≤—Å–µ–π —Ü–µ–ø–æ—á–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** OutOfMemoryError –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ (Robolectric + MockWebServer + –ø–æ—Ç–æ–∫–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ = –º–Ω–æ–≥–æ –ø–∞–º—è—Ç–∏)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** 
- ‚ö†Ô∏è **–ù–ï –£–î–ê–õ–Ø–¢–¨** - —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Ç–µ—Å—Ç—ã
- ‚úÖ –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω—ã –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ CI (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ)
- üìã TODO: –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –º–µ–Ω—å—à–∏–µ —Ç–µ—Å—Ç—ã –∏–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑:
  - –ú–µ–Ω—å—à–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã (—Å–µ–π—á–∞—Å 512KB)
  - –û—Ç–¥–µ–ª—å–Ω—ã–µ test –∫–ª–∞—Å—Å—ã –ø–æ –≥—Ä—É–ø–ø–∞–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
  - –ë–æ–ª–µ–µ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ –º–æ–∫–∏ –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–≥–æ Robolectric

---

### 2. feature:status/StatusRouteTest.kt (84 —Å—Ç—Ä–æ–∫–∏)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–ö–¢–ò–í–ï–ù

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- üé® UI: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ Snackbar –ø–æ—Å–ª–µ manual health ping
- üé® UI: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ latency –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ ("150 ms")

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü° **–ù–ò–ó–ö–ê–Ø**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–ª—å–∫–æ –∫–æ—Å–º–µ—Ç–∏–∫—É UI (Snackbar)
- –õ–µ–≥–∫–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é
- –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É

**–ü—Ä–æ–±–ª–µ–º–∞:** Robolectric + Compose UI tests = –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∏ —Ç—è–∂–µ–ª—ã–µ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** ‚ö†Ô∏è **–ú–û–ñ–ù–û –û–¢–ö–õ–Æ–ß–ò–¢–¨** –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ CI

---

### 3. feature:status/StatusViewModelTest.kt (107 —Å—Ç—Ä–æ–∫)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–ö–¢–ò–í–ï–ù

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚úÖ **onRefreshHealth** —Å —É—Å–ø–µ—à–Ω—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º ‚Üí emit success event
- ‚úÖ **onRefreshHealth** —Å –æ—à–∏–±–∫–æ–π ‚Üí emit error event
- ‚úÖ Propagation latency –≤ events

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü† **–°–†–ï–î–ù–Ø–Ø**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞–∂–Ω—É—é –ª–æ–≥–∏–∫—É health check
- –ù–æ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ—Å—Ç–∞—è –∏ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è
- –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é

**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç coroutines –∏ Flow, –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å timings

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** 
- üîÑ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ
- ‚ö†Ô∏è –ï—Å–ª–∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç CI ‚Üí –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å

---

### 4. feature:queue/QueueWorkInfoMapperTest.kt (224 —Å—Ç—Ä–æ–∫–∏)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–ö–¢–ò–í–ï–ù

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚úÖ **–ú–∞–ø–ø–∏–Ω–≥ WorkInfo.State** ‚Üí UI —Å—Ç–∞—Ç—É—Å—ã (RUNNING, ENQUEUED, SUCCEEDED, FAILED)
- ‚úÖ **Waiting reasons** - —Å–µ—Ç—å, —Ä–µ—Ç—Ä–∞–π, constraints
- ‚úÖ **Progress calculation** - –ø—Ä–æ—Ü–µ–Ω—Ç—ã, bytes sent/total
- ‚úÖ **Retry countdown** - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ —Ä–µ—Ç—Ä–∞—è
- ‚úÖ **Poll vs Upload priority** - –∫–∞–∫–æ–π —Å—Ç–∞—Ç—É—Å –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü† **–°–†–ï–î–ù–Ø–Ø**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞–∂–Ω—É—é –ª–æ–≥–∏–∫—É –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥–∏
- –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ (—á–∏—Å—Ç—ã–π –º–∞–ø–ø–∏–Ω–≥)
- –ù–æ –±–∞–≥–æ–≤ –≤ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ –º–æ–≥—É—Ç –∑–∞–ø—É—Ç–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü—Ä–æ–±–ª–µ–º–∞:** Pure Kotlin test, –Ω–µ –¥–æ–ª–∂–µ–Ω –≤—ã–∑—ã–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å –ø–∞–º—è—Ç—å—é

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** 
- üîÑ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ
- ‚úÖ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ –°–û–•–†–ê–ù–ò–¢–¨

---

### 5. feature:queue/QueueScreenTest.kt (119 —Å—Ç—Ä–æ–∫)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–ö–¢–ò–í–ï–ù

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- üé® UI: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ error messages
- üé® UI: –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç server message –Ω–∞–¥ fallback
- üé® UI: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ completion time
- üé® UI: –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü° **–ù–ò–ó–ö–ê–Ø**
- –ß–∏—Å—Ç–æ UI –ª–æ–≥–∏–∫–∞ (—Å—Ç—Ä–æ–∫–∏ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- –õ–µ–≥–∫–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é
- –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É

**–ü—Ä–æ–±–ª–µ–º–∞:** Pure Kotlin test —Å mockk, –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç—è–∂–µ–ª—ã–º

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** 
- ‚úÖ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ –°–û–•–†–ê–ù–ò–¢–¨ (–ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π)
- ‚ö†Ô∏è –ï—Å–ª–∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç ‚Üí –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å

---

### 6. feature:queue/QueueViewModelTest.kt (487 —Å—Ç—Ä–æ–∫)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–ö–¢–ò–í–ï–ù

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚úÖ **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ WorkInfo + Queue** - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —ç–∫—Ä–∞–Ω–∞ –æ—á–µ—Ä–µ–¥–∏
- ‚úÖ **Retry —Å idempotency key** - –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–µ–π
- ‚úÖ **–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è Poll –Ω–∞–¥ Upload** - –∫–∞–∫–æ–π —Å—Ç–∞—Ç—É—Å –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å
- ‚úÖ **Location hidden events** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ —Å–∫—Ä—ã—Ç—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö
- ‚úÖ **Retention policy** - –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö succeeded items

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üî¥ **–í–´–°–û–ö–ê–Ø**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥–∏
- –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö (Room + WorkManager)
- Retry –ª–æ–≥–∏–∫–∞ —Å idempotency - –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–≥—Ä—É–∑–æ–∫
- –°–ª–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ edge cases –≤—Ä—É—á–Ω—É—é

**–ü—Ä–æ–±–ª–µ–º–∞:** Coroutines + Flow + WorkManager mocks = –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–º

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** 
- ‚ö†Ô∏è **–ù–ï –£–î–ê–õ–Ø–¢–¨** - –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Ç–µ—Å—Ç—ã
- üîÑ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ
- ‚ö†Ô∏è –ï—Å–ª–∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç CI ‚Üí –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å, –Ω–æ —Å –≤—ã—Å–æ–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

---

### 7. feature:queue/QueueViewModelMappingTest.kt (139 —Å—Ç—Ä–æ–∫)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–ö–¢–ò–í–ï–ù

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚úÖ **–ú–∞–ø–ø–∏–Ω–≥ UploadItemEntity ‚Üí UI model**
- ‚úÖ **Progress states** - indeterminate, determinate, failed
- ‚úÖ **Error metadata** - kind, HTTP code, message
- ‚úÖ **Auth failures** - highlighting warnings
- ‚úÖ **Completion timestamps**

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üü† **–°–†–ï–î–ù–Ø–Ø**
- –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –º–∞–ø–ø–∏–Ω–≥–∞
- –í–∞–∂–Ω–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ UI
- –ù–æ –ª–µ–≥–∫–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä—É—á–Ω—É—é

**–ü—Ä–æ–±–ª–µ–º–∞:** Pure Kotlin test, –Ω–µ –¥–æ–ª–∂–µ–Ω –≤—ã–∑—ã–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** 
- ‚úÖ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ –°–û–•–†–ê–ù–ò–¢–¨ (–ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π)
- ‚ö†Ô∏è –ï—Å–ª–∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç ‚Üí –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å

---

## –°–≤–æ–¥–∫–∞ –ø–æ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏

| –¢–µ—Å—Ç | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –°—Ç–∞—Ç—É—Å | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|------|------------|--------|--------------|
| UploadWorkerTest | üî¥ –í–´–°–û–ö–ê–Ø | ‚ùå –û—Ç–∫–ª—é—á–µ–Ω | –ù–µ —É–¥–∞–ª—è—Ç—å, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å |
| StatusRouteTest | üü° –ù–ò–ó–ö–ê–Ø | ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω | –ú–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å |
| StatusViewModelTest | üü† –°–†–ï–î–ù–Ø–Ø | ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω | –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å |
| QueueWorkInfoMapperTest | üü† –°–†–ï–î–ù–Ø–Ø | ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω | –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å |
| QueueScreenTest | üü° –ù–ò–ó–ö–ê–Ø | ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω | –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å |
| QueueViewModelTest | üî¥ –í–´–°–û–ö–ê–Ø | ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω | –ù–µ —É–¥–∞–ª—è—Ç—å |
| QueueViewModelMappingTest | üü† –°–†–ï–î–ù–Ø–Ø | ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω | –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å |

## –ü—Ä–æ–±–ª–µ–º—ã —Å CI

### –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è
- ‚úÖ **core:network** - –≤—Å–µ —Ç–µ—Å—Ç—ã –æ—Ç–∫–ª—é—á–µ–Ω—ã —á–µ—Ä–µ–∑ `tasks.withType<Test>().configureEach { enabled = false }`
- ‚ùì **feature:status** - —Ç–µ—Å—Ç—ã –∞–∫—Ç–∏–≤–Ω—ã, —Å—Ç–∞—Ç—É—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω (–∫–æ–º–∞–Ω–¥—ã –∑–∞–≤–∏—Å–∞—é—Ç)
- ‚ùì **feature:queue** - —Ç–µ—Å—Ç—ã –∞–∫—Ç–∏–≤–Ω—ã, —Å—Ç–∞—Ç—É—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω (–∫–æ–º–∞–Ω–¥—ã –∑–∞–≤–∏—Å–∞—é—Ç)

### –ü–æ—á–µ–º—É –∑–∞–≤–∏—Å–∞—é—Ç —Ç–µ—Å—Ç—ã?

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. **Robolectric initialization** - –ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ Robolectric –∑–∞–≥—Ä—É–∂–∞–µ—Ç Android SDK, –∑–∞–Ω–∏–º–∞–µ—Ç 30+ —Å–µ–∫—É–Ω–¥
2. **Compose UI tests** - StatusRouteTest –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Compose test rule, —ç—Ç–æ –º–µ–¥–ª–µ–Ω–Ω–æ
3. **Coroutines + Flow** - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ test dispatcher –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å deadlocks
4. **MockK bytecode transformation** - —Ç—è–∂–µ–ª—ã–µ –º–æ–∫–∏ –º–æ–≥—É—Ç –¥–æ–ª–≥–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ (–¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ CI)

–û—Ç–∫–ª—é—á–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ç—è–∂–µ–ª—ã–µ Compose UI —Ç–µ—Å—Ç—ã:

**feature:status/build.gradle.kts:**
```kotlin
tasks.withType<Test>().configureEach {
    // –û—Ç–∫–ª—é—á–∏—Ç—å Compose UI —Ç–µ—Å—Ç—ã –∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º —Å Robolectric
    exclude("**/StatusRouteTest.class")
}
```

‚úÖ –û—Å—Ç–∞–≤–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å ViewModel –∏ mapper —Ç–µ—Å—Ç—ã (–ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ)  
‚ùå –ü–æ—Ç–µ—Ä—è–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É UI (–Ω–æ —ç—Ç–æ –Ω–∏–∑–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ)

### –í–∞—Ä–∏–∞–Ω—Ç –ë: –ü–æ–ª–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ feature —Ç–µ—Å—Ç–æ–≤ (–¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏)

**feature:status/build.gradle.kts:**
```kotlin
tasks.withType<Test>().configureEach {
    enabled = false
}
```

**feature:queue/build.gradle.kts:**
```kotlin
tasks.withType<Test>().configureEach {
    enabled = false
}
```

‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç CI  
‚ùå –ü–æ—Ç–µ—Ä—è–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –∫—Ä–∏—Ç–∏—á–Ω–æ–π –ª–æ–≥–∏–∫–∏ QueueViewModel

### –í–∞—Ä–∏–∞–Ω—Ç –í: –¢–∞–π–º–∞—É—Ç—ã –¥–ª—è –∑–∞–≤–∏—Å—à–∏—Ö —Ç–µ—Å—Ç–æ–≤ (—Ä–∏—Å–∫–æ–≤–∞–Ω–Ω–æ)

–î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∞—É—Ç—ã –≤ –∫–æ—Ä–Ω–µ–≤–æ–π build.gradle.kts:

```kotlin
tasks.withType<Test>().configureEach {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ...
    
    // –£–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –µ—Å–ª–∏ —Ç–µ—Å—Ç –∑–∞–≤–∏—Å–∞–µ—Ç
    timeout.set(Duration.ofMinutes(10))
}
```

‚ö†Ô∏è –ú–æ–∂–µ—Ç –º–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã  
‚ö†Ô∏è –¢–µ—Å—Ç—ã –≤—Å—ë —Ä–∞–≤–Ω–æ –±—É–¥—É—Ç –∑–∞–Ω–∏–º–∞—Ç—å 10 –º–∏–Ω—É—Ç

## –ò—Ç–æ–≥–æ–≤–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

### –î–ª—è –°–†–û–ß–ù–û–ô —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ CI (—Å–µ–π—á–∞—Å):
1. ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å **–í–∞—Ä–∏–∞–Ω—Ç –ë** - –æ—Ç–∫–ª—é—á–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã –≤ feature:status –∏ feature:queue
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏ –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤:
   - –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: QueueViewModelTest (–∫—Ä–∏—Ç–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞)
   - –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: Mapper —Ç–µ—Å—Ç—ã
   - –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: UI —Ç–µ—Å—Ç—ã

### –î–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è (–ø–æ—Ç–æ–º):
1. üîÑ **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å UploadWorkerTest:**
   - –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –º–µ–Ω—å—à–∏–µ test –∫–ª–∞—Å—Å—ã –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
   - –£–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ –º–æ–∫–∏

2. üîÑ **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∞–Ω–∏—è –≤ feature —Ç–µ—Å—Ç–∞—Ö:**
   - –î–æ–±–∞–≤–∏—Ç—å debug –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ CI
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ test dispatchers
   - –ò–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å Compose UI —Ç–µ—Å—Ç—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é task

3. üîÑ **–£–ª—É—á—à–∏—Ç—å test infrastructure:**
   - –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ç—Ä–∏—Ü—É —Ç–µ—Å—Ç–æ–≤ (–±—ã—Å—Ç—Ä—ã–µ/–º–µ–¥–ª–µ–Ω–Ω—ã–µ)
   - Separate job –¥–ª—è UI —Ç–µ—Å—Ç–æ–≤
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ Robolectric artifacts

## –î—É–±–ª–∏—Ä—É—é—â–µ–µ—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ?

### UploadWorkerTest vs QueueViewModelTest
- ‚ùå **–ù–µ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è**
- UploadWorkerTest = Worker implementation (–∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤)
- QueueViewModelTest = UI –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥–∏ –∑–∞–≥—Ä—É–∑–æ–∫
- –†–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏

### StatusViewModelTest vs manual testing
- ‚ö†Ô∏è **–ß–∞—Å—Ç–∏—á–Ω–æ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è**
- Health check –ª–µ–≥–∫–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä—É—á–Ω—É—é –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- –ù–æ —Ç–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç edge cases (exceptions, latency propagation)

### QueueScreenTest vs manual testing
- ‚úÖ **–ü–æ–ª–Ω–æ—Å—Ç—å—é –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è**
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫ –ª–µ–≥–∫–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω–æ
- –¢–µ—Å—Ç—ã –¥–∞—é—Ç –º–∞–ª–æ value

## –í—ã–≤–æ–¥

**–ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Ç–µ—Å—Ç—ã (–ù–ï –£–î–ê–õ–Ø–¢–¨):**
- ‚ùå UploadWorkerTest (—É–∂–µ –æ—Ç–∫–ª—é—á–µ–Ω) - core –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- ‚ùå QueueViewModelTest - –∫—Ä–∏—Ç–∏—á–Ω–∞—è UI –ª–æ–≥–∏–∫–∞

**–ù–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Ç–µ—Å—Ç—ã (–º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å):**
- ‚úÖ StatusRouteTest - –∫–æ—Å–º–µ—Ç–∏–∫–∞ UI
- ‚úÖ QueueScreenTest - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫

**–°—Ä–µ–¥–Ω–µ–π –≤–∞–∂–Ω–æ—Å—Ç–∏ (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å):**
- üîÑ StatusViewModelTest - –ø—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞, –Ω–æ –ø–æ–ª–µ–∑–Ω–∞—è
- üîÑ QueueWorkInfoMapperTest - –≤–∞–∂–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤
- üîÑ QueueViewModelMappingTest - –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥

**–î–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ CI:** –ü—Ä–∏–º–µ–Ω–∏—Ç—å –í–∞—Ä–∏–∞–Ω—Ç –ë (–ø–æ–ª–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ feature —Ç–µ—Å—Ç–æ–≤).
